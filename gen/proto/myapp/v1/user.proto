syntax = "proto3";

package myapp.v1;

import "buf/validate/validate.proto";
import "google/protobuf/descriptor.proto";
import "google/protobuf/timestamp.proto";
import "myapp/v1/Post.proto";

option myoption = true;

extend google.protobuf.FileOptions {
  optional string testopt = 1;
}

extend google.protobuf.MessageOptions {
  optional string testopt = 1;
}

extend google.protobuf.FieldOptions {
  optional string testopt = 1;
}
extend google.protobuf.OneofOptions {
  optional string testopt = 1;
}

message User {
  oneof myoneof {
    string choice1 = 5;
  }

  Post post = 4;
  map<int32, string> maptype = 209 [
    (buf.validate.field).map.keys = {lt: 10},
    (buf.validate.field).map.values = {
      const: "aaa"
      example: "aa"
    }
  ];
  repeated string name = 1 [
    (buf.validate.field).required = "true",
    deprecated = "true",
    (buf.validate.field).repeated.min_items = 10,
    (buf.validate.field).repeated.unique = true
  ];
  string name2 = 2 [
    (buf.validate.field).required = "true",
    (buf.validate.field).string.min_len = 2
  ];
  google.protobuf.Timestamp createdAt = 3 [
    (buf.validate.field).required = "true",
    (buf.validate.field).cel = {
      id: "test"
      message: "this is a test"
      expression: "this = test"
    }
  ];
}

service UserServiceService {
  option myoption = true;
}
