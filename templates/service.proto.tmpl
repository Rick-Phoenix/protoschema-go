syntax = "proto3";

{{ range $importPath, $_ := .Imports }}
{{ if gt (len $importPath) 0 -}}import "{{ $importPath }}";{{end}}
{{- end }}

package {{ .PackageName }};

{{ range .FileOptions -}}
{{ fmtOpt . }};
{{ end }}

{{ template "extensions" . }}

{{ range .Enums -}}
{{ template "enum" . }}
{{ end }}

{{ template "message" . }}

{{ $protoPkg := .PackageName }}
service {{ serviceSuffix .ResourceName }} {
{{ range .ServiceOptions -}}
  {{ fmtOpt . }};
{{ end }}
  {{- range .Handlers}}
  rpc {{ .Name }}({{ getMsgName .Request $protoPkg }}) returns({{ getMsgName .Response $protoPkg }});
  {{- end}}
}


